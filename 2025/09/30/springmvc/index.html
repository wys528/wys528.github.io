<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>springmvc | Hexo</title><meta name="author" content="lele"><meta name="copyright" content="lele"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="入门简介SpringMVC是一站式的web框架。他是Spring框架中的web模块；因为非常重要，所以我们一般独立出来称为 SpringMVC；  官网：https:&#x2F;&#x2F;docs.spring.io&#x2F;spring-framework&#x2F;reference&#x2F;web&#x2F;webmvc.html#mvc SpringMVC 是 Spring 的 web 模块，用来开发Web应用 SprinMVC 应用最终作为">
<meta property="og:type" content="article">
<meta property="og:title" content="springmvc">
<meta property="og:url" content="http://example.com/2025/09/30/springmvc/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="入门简介SpringMVC是一站式的web框架。他是Spring框架中的web模块；因为非常重要，所以我们一般独立出来称为 SpringMVC；  官网：https:&#x2F;&#x2F;docs.spring.io&#x2F;spring-framework&#x2F;reference&#x2F;web&#x2F;webmvc.html#mvc SpringMVC 是 Spring 的 web 模块，用来开发Web应用 SprinMVC 应用最终作为">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2025-09-30T13:15:37.000Z">
<meta property="article:modified_time" content="2025-10-02T09:34:38.671Z">
<meta property="article:author" content="lele">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/image/tx.jpg"><link rel="canonical" href="http://example.com/2025/09/30/springmvc/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'springmvc',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-10-02 17:34:38'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/tx.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">141</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Hexo"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/test.gif"/><span class="site-name">Hexo</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">springmvc</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-09-30T13:15:37.000Z" title="发表于 2025-09-30 21:15:37">2025-09-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-10-02T09:34:38.671Z" title="更新于 2025-10-02 17:34:38">2025-10-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">14.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>71分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="springmvc"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><strong>SpringMVC</strong>是<strong>一站式的web框架</strong>。他是Spring框架中的<strong>web模块</strong>；因为非常重要，所以我们一般独立出来称为 SpringMVC；</p>
<ol>
<li>官网：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/reference/web/webmvc.html#mvc">https://docs.spring.io/spring-framework/reference/web/webmvc.html#mvc</a></li>
<li>SpringMVC 是 Spring 的 web 模块，用来开发Web应用</li>
<li>SprinMVC 应用最终作为 B&#x2F;S、C&#x2F;S 模式下的 Server 端</li>
<li>Web应用的核心就是 <strong>处理HTTP请求响应</strong></li>
</ol>
<h2 id="开发模式"><a href="#开发模式" class="headerlink" title="开发模式"></a>开发模式</h2><p><strong>回顾两种开发模式</strong>：</p>
<p><strong>前后分离开发</strong></p>
<p> SpringMVC提供常见注解：<code>@RestController</code>、<code>@RequestMapping</code>、<code>@ResponseBody</code>等</p>
<ol>
<li>前端开发人员编写独立的前端项目</li>
<li>前端项目自己控制页面跳转逻辑</li>
<li>后端仅需返回前端需要的JSON数据</li>
<li>后端无需关心页面效果等问题</li>
</ol>
<p> 优点：分工明确，快速协同，专注用户体验</p>
<p> 缺点：成本高，技术复杂，门槛高</p>
<p><strong>前后不分离开发</strong></p>
<ol>
<li>后端开发人员要控制页面跳转逻辑（利用转发、重定向）</li>
<li>服务器要拿到业务数据，全部填充到页面，然后整体把页面返回给客户端</li>
<li>模版引擎作用：将数据填充到页面模板</li>
<li>JSP其实就是一种模板引擎</li>
</ol>
<p> 优点：弱前端、低成本、速度快</p>
<p> 缺点：不专业、体验差、效率低、易扯皮</p>
<h2 id="SpringMVC功能"><a href="#SpringMVC功能" class="headerlink" title="SpringMVC功能"></a>SpringMVC功能</h2><p>官网：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/reference/web/webmvc.html#mvc">https://docs.spring.io/spring-framework/reference/web/webmvc.html#mvc</a></p>
<p><strong>SpringMVC功能如下</strong>：</p>
<h2 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h2><p>场景：浏览器发送<code>/hello</code> 请求，服务端响应 <code>Hello,SpringMVC!</code></p>
<h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><h3 id="编写HelloController"><a href="#编写HelloController" class="headerlink" title="编写HelloController"></a>编写HelloController</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">package com.<span class="property">lfy</span>.<span class="property">springmvc</span>.<span class="property">controller</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">stereotype</span>.<span class="property">Controller</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">RequestMapping</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">ResponseBody</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">RestController</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span> <span class="comment">//前后分离开发就用这个</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">&quot;/hello&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">handle</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;handle()方法执行了!&quot;</span>);</span><br><span class="line">        <span class="comment">//服务器给浏览器写出如下字符串</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello,Spring MVC! 你好!~~~&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="访问测试"><a href="#访问测试" class="headerlink" title="访问测试"></a>访问测试</h3><ol>
<li>启动 <code>Springmvc01HelloworldApplication</code></li>
<li>浏览器访问 <a target="_blank" rel="noopener" href="http://localhost:8080/hello">http://localhost:8080/hello</a></li>
<li>收到服务器响应字符串：<code>Hello,Spring MVC! 你好!~~~</code></li>
</ol>
<h3 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h3><ol>
<li><h4 id="Controller-与-RestController"><a href="#Controller-与-RestController" class="headerlink" title="@Controller 与 @RestController "></a><code>@Controller</code> 与 <code>@RestController </code></h4></li>
<li><p><code>@Controller</code>：用来开发前后不分离应用：方法的<strong>返回值</strong>代表一个<strong>页面地址</strong></p>
</li>
<li><p><code>@RestController </code>：用来开发前后分离应用：方法的<strong>返回值</strong>代表给浏览器<strong>响应的内容</strong>（<strong>文本&#x2F;JSON</strong>）</p>
</li>
</ol>
<h4 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h4><p><em><strong>精确路径必须全局唯一</strong></em> <em><strong>路径位置通配符</strong></em><em>： 如果SpringMVC发现请求路径多个方法都能匹配上，那就</em><em><strong>精确优先</strong></em><em>；</em>      <em><strong><code>\*</code></strong></em><em>: 匹配任意多个字符（0~N）； 不能匹配多个路径</em>      <em>**<code>\**</code><strong>*<em>： 匹配任意多层路径</em>      <em><strong><code>?</code></strong></em><em>: 匹配任意单个字符（1）</em> *<strong>精确程度</strong></strong>：* <em><strong><code>完全匹配</code></strong></em> <em>&gt;</em> <em><strong><code>? </code></strong></em>*&gt;</em> <em><strong><code>\*</code></strong></em> <em>&gt;</em> <em><strong><code>\**</code></strong></em></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//@ResponseBody</span></span><br><span class="line"><span class="comment">//@Controller</span></span><br><span class="line"><span class="comment">//告诉Spring这是一个控制器（处理请求的组件）</span></span><br><span class="line"><span class="meta">@RestController</span> <span class="comment">//前后分离开发就用这个</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 精确路径必须全局唯一</span></span><br><span class="line"><span class="comment">     * 路径位置通配符： 多个都能匹配上，那就精确优先</span></span><br><span class="line"><span class="comment">     *      *: 匹配任意多个字符（0~N）； 不能匹配多个路径</span></span><br><span class="line"><span class="comment">     *      **： 匹配任意多层路径</span></span><br><span class="line"><span class="comment">     *      ?: 匹配任意单个字符（1）</span></span><br><span class="line"><span class="comment">     *   精确程度： 完全匹配 &gt; ? &gt; * &gt; **</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ResponseBody</span>  <span class="comment">//把返回值放到响应体中； 每次请求进来执行目标方法</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">&quot;/hello&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">handle</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;handle()方法执行了!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello,Spring MVC! 你好!~~~&quot;</span>; <span class="comment">//默认认为返回值是跳到一个页面</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">&quot;/he?ll&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">handle01</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;handle01方法执行了!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;handle01&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// /hellr</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">&quot;/he*ll&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">handle02</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;handle02方法执行了!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;handle02&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span> <span class="comment">//</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">&quot;/he/**&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">handle03</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;handle03方法执行了!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;handle03&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="请求处理"><a href="#请求处理" class="headerlink" title="请求处理"></a>请求处理</h1><h2 id="路径映射-RequestMapping"><a href="#路径映射-RequestMapping" class="headerlink" title="路径映射 - @RequestMapping"></a>路径映射 - @RequestMapping</h2><ul>
<li>@<strong>RequestMapping 注解是SpringMVC中进行请求映射的重要注解；</strong></li>
<li><strong>请求映射是指</strong>：浏览器发送的请求路径，需要映射一个对应的Controller方法进行处理</li>
<li><strong>路径映射</strong><ul>
<li><strong>路径规则：</strong><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/6.1.11/javadoc-api/org/springframework/web/util/pattern/PathPattern.html">https://docs.spring.io/spring-framework/docs/6.1.11/javadoc-api/org/springframework/web/util/pattern/PathPattern.html</a></li>
<li><strong>路径变量：</strong>@PathVariable</li>
</ul>
</li>
<li><strong>请求限定</strong><ul>
<li>请求方式：method</li>
<li>请求参数：params</li>
<li>请求头：headers</li>
<li>请求内容类型：consumes</li>
<li>响应内容类型：produces</li>
</ul>
</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">package com.<span class="property">lfy</span>.<span class="property">springmvc</span>.<span class="property">controller</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">stereotype</span>.<span class="property">Controller</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">RequestMapping</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">RequestMethod</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">RestController</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试请求限定</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestMappingLimitController</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求方式：</span></span><br><span class="line"><span class="comment">     *      GET, HEAD, POST, PUT, PATCH, DELETE, OPTIONS, TRACE</span></span><br><span class="line"><span class="comment">     *  Postman</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">&quot;/test01&quot;</span>,method = &#123;<span class="title class_">RequestMethod</span>.<span class="property">DELETE</span>,<span class="title class_">RequestMethod</span>.<span class="property">GET</span>&#125;)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">test01</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求参数：params = &#123;&quot;username&quot;,&quot;age&quot;&#125;</span></span><br><span class="line"><span class="comment">     * 1）、username：  表示请求必须包含username参数</span></span><br><span class="line"><span class="comment">     * 2）、age=18：   表示请求参数中必须包含age=18的参数</span></span><br><span class="line"><span class="comment">     * 3）、gender!=1：  表示请求参数中不能包含gender=1的参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">&quot;/test02&quot;</span>,params = &#123;<span class="string">&quot;age=18&quot;</span>,<span class="string">&quot;username&quot;</span>,<span class="string">&quot;gender!=1&quot;</span>&#125;)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">test02</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test02&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求头：headers = &#123;&quot;haha&quot;&#125;</span></span><br><span class="line"><span class="comment">     * 1）、haha：  表示请求中必须包含名为haha的请求头</span></span><br><span class="line"><span class="comment">     * 2）、hehe!=1：  表示请求头中 的 hehe 不能是1；（hehe=0，不带hehe）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">&quot;/test03&quot;</span>,headers = <span class="string">&quot;haha&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">test03</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test03&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求内容类型：consumes = &#123;&quot;application/json&quot;&#125;; 消费什么数据；</span></span><br><span class="line"><span class="comment">     * Media Type：媒体类型</span></span><br><span class="line"><span class="comment">     * 1）、application/json：  表示浏览器必须携带 json 格式的数据。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">&quot;/test04&quot;</span>,consumes = <span class="string">&quot;application/json&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">test04</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test04&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 响应内容类型：produces = &#123;&quot;text/plain;charset=utf-8&quot;&#125;; 生产什么数据；</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">&quot;/test05&quot;</span>,produces = <span class="string">&quot;text/html;charset=utf-8&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">test05</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&lt;h1&gt;你好，张三&lt;/h1&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="前置概念复习"><a href="#前置概念复习" class="headerlink" title="前置概念复习"></a>前置概念复习</h2><h3 id="HTTP请求-响应"><a href="#HTTP请求-响应" class="headerlink" title="HTTP请求&#x2F;响应"></a>HTTP请求&#x2F;响应</h3><p>HTTP请求会带来各种数据；HTTP协议格式如下（也就是HTTP携带不同数据的几个位置）</p>
<ul>
<li><strong>请求首行</strong>：(请求方式、请求路径、请求协议)</li>
<li><strong>请求头</strong>：(k: v   \n  k: v)<ul>
<li><strong>请求头：</strong> 有很多重要信息，SpringMVC 可以快速获取到</li>
</ul>
</li>
<li><strong>请求体</strong>：(此次请求携带的其他数据)<ul>
<li><strong>请求体</strong> 携带大量数据，特别是POST请求，会把参数放在请求体中</li>
</ul>
</li>
</ul>
<h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h3><p>URL 也可以携带大量数据，特别是GET请求，会把参数放在URL上</p>
<h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><p>JavaScript Object Notation(JavaScript 对象表示法)</p>
<ul>
<li>JSON用于将结构化数据表示为 JavaScript 对象的标准格式，通常用于在网站上表示和传输数据</li>
<li>JSON 可以作为一个对象或者字符串存在</li>
</ul>
<blockquote>
<p>前者用于解读 JSON 中的数据，后者用于通过网络传输 JSON 数据。</p>
</blockquote>
<p>JavaScript 提供一个全局的 可访问的 JSON 对象来对这两种数据进行转换。</p>
<p><strong>JSON 是一种纯数据格式，它只包含属性，没有方法</strong>。如下JSON，如何获取指定位置的属性值</p>
<h2 id="请求处理：实验"><a href="#请求处理：实验" class="headerlink" title="请求处理：实验"></a>请求处理：实验</h2><ol>
<li><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3></li>
</ol>
<blockquote>
<p>通过如下实验，测试 <code>SpringMVC </code>如何获取各种数据</p>
</blockquote>
<p>在项目 <code>static </code>下创建 <code>index.html</code> 文件。启动项目做以上实验；</p>
<h4 id="index-html-文件内容如下"><a href="#index-html-文件内容如下" class="headerlink" title="index.html 文件内容如下"></a><strong>index.html 文件内容如下</strong></h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    本网页使用layui框架编写； layui官网：https://layui.dev/  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/layui/2.9.15/css/layui.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/layui/2.9.15/layui.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.layui-col-xs6</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs6&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SpringMVC - 请求测试<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-collapse&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验1：使用普通变量，收集请求参数<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span> &gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;justify-content: center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;layui-form&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/handle01&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 250px;padding: 10px&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>  <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span></span></span><br><span class="line"><span class="tag">                                               <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span> <span class="attr">lay-affix</span>=<span class="string">&quot;eye&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs12&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-cellphone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;cellphone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;agreement&quot;</span> <span class="attr">title</span>=<span class="string">&quot;同意&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#terms&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: relative; top: 6px; left: -15px;&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">ins</span>&gt;</span>用户协议<span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-fluid&quot;</span> <span class="attr">lay-submit</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验2：使用@RequestParam，逐一封装多个参数<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;justify-content: center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;layui-form&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/handle02&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 250px;padding: 10px&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>  <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span></span></span><br><span class="line"><span class="tag">                                               <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span> <span class="attr">lay-affix</span>=<span class="string">&quot;eye&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs12&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-cellphone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;cellphone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;agreement&quot;</span> <span class="attr">title</span>=<span class="string">&quot;同意&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#terms&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: relative; top: 6px; left: -15px;&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">ins</span>&gt;</span>用户协议<span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-fluid&quot;</span> <span class="attr">lay-submit</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验3：使用POJO，统一封装多个参数<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;justify-content: center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;layui-form&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/handle03&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 250px;border: 5px solid black;padding: 10px&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>  <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span></span></span><br><span class="line"><span class="tag">                                               <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span> <span class="attr">lay-affix</span>=<span class="string">&quot;eye&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs12&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-cellphone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;cellphone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;agreement&quot;</span> <span class="attr">title</span>=<span class="string">&quot;同意&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#terms&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: relative; top: 6px; left: -15px;&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">ins</span>&gt;</span>用户协议<span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-fluid&quot;</span> <span class="attr">lay-submit</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验4：使用@RequestHeader获取请求头数据<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/handle04&quot;</span>&gt;</span>随便发个请求<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验5：使用@CookieValue获取Cookie数据<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/handle05&quot;</span>&gt;</span>随便又发个请求<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验6：使用POJO，级联封装复杂对象<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;justify-content: center&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;layui-form layui-form-pane&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/handle06&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 400px;padding: 10px&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>  <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span></span></span><br><span class="line"><span class="tag">                                               <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span> <span class="attr">lay-affix</span>=<span class="string">&quot;eye&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs12&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-cellphone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;cellphone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs4&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-website&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;address.province&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;省&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs4&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-find-fill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;address.city&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;市&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs4&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-tree&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;address.area&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;区&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span> <span class="attr">title</span>=<span class="string">&quot;男&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span> <span class="attr">title</span>=<span class="string">&quot;女&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>爱好<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;足球&quot;</span> <span class="attr">title</span>=<span class="string">&quot;足球&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;篮球&quot;</span> <span class="attr">title</span>=<span class="string">&quot;篮球&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;乒乓球&quot;</span> <span class="attr">title</span>=<span class="string">&quot;乒乓球&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>年级<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;grade&quot;</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;一年级&quot;</span>&gt;</span>一年级<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;二年级&quot;</span>&gt;</span>二年级<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;三年级&quot;</span>&gt;</span>三年级<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;四年级&quot;</span>&gt;</span>四年级<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;agreement&quot;</span> <span class="attr">title</span>=<span class="string">&quot;同意&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#terms&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: relative; top: 6px; left: -15px;&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">ins</span>&gt;</span>用户协议<span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-fluid&quot;</span> <span class="attr">lay-submit</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验7：使用@RequestBody，封装JSON对象<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-bg-blue&quot;</span>&gt;</span>去Postman测试，自己带上【实验6】中数据的json<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验8：使用@RequestPart/@RequestParam，封装文件，测试文件上传<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;justify-content: center&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;layui-form layui-form-pane&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/handle08&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 350px;padding: 10px&quot;</span> &gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">fieldset</span> <span class="attr">class</span>=<span class="string">&quot;layui-elem-field&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: lemonchiffon&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">legend</span>&gt;</span>文件上传要求<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-field-box&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">p</span>&gt;</span>1. 表单：method=post<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">p</span>&gt;</span>2. enctype=&quot;multipart/form-data&quot;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">p</span>&gt;</span>3. 注意：SpringMVC对上传文件有大小限制（默认单文件最大：1MB；整个请求最大：10MB）<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>  <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span></span></span><br><span class="line"><span class="tag">                                               <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span> <span class="attr">lay-affix</span>=<span class="string">&quot;eye&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs12&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-wrap&quot;</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-prefix&quot;</span>&gt;</span></span><br><span class="line">                                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-cellphone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;cellphone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>头像<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;headerImg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>生活照<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lifeImg&quot;</span> <span class="attr">multiple</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;agreement&quot;</span> <span class="attr">title</span>=<span class="string">&quot;同意&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#terms&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: relative; top: 6px; left: -15px;&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">ins</span>&gt;</span>用户协议<span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-fluid&quot;</span> <span class="attr">lay-submit</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验9：使用HttpEntity，封装请求原始数据<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-bg-blue&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/handle09?user=admin&amp;age=18&quot;</span>&gt;</span>随便㕛发个请求<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验10：使用原生Servlet API，获取原生请求对象<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-bg-blue&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/handle09?user=admin&amp;age=18&quot;</span>&gt;</span>随便叒发个请求<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-xs6&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SpringMVC - 响应测试<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-collapse&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验1：返回json数据<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/resp01&quot;</span>&gt;</span>给个JSON<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验2：文件下载测试<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/download&quot;</span>&gt;</span>给个美女<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-title&quot;</span>&gt;</span>实验3：使用Thymeleaf模版引擎，实现服务端渲染<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-colla-content&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">fieldset</span> <span class="attr">class</span>=<span class="string">&quot;layui-elem-field&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: lemonchiffon&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">legend</span>&gt;</span>服务端渲染<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-field-box&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>现在服务端渲染的方式用的很少了；项目基本都是前后分离。<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>这样各端专注于自己的开发，快速协同分工<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">fieldset</span> <span class="attr">class</span>=<span class="string">&quot;layui-elem-field&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: lightcyan&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">legend</span>&gt;</span>前后分离<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-field-box&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>1. 前端开发人员编写独立的前端项目<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>2. 前端项目自己控制页面跳转逻辑<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>3. 后端仅需返回前端需要的JSON数据<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>4. 后端无需关心页面效果等问题<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>优点：分工明确，快速协同，专注用户体验<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>缺点：成本高，技术复杂，门槛高<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">fieldset</span> <span class="attr">class</span>=<span class="string">&quot;layui-elem-field&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: lightcyan&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">legend</span>&gt;</span>前后不分离(服务端渲染)<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-field-box&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>1. 后端开发人员要控制页面跳转逻辑（利用转发、重定向）<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>2. 服务器要拿到业务数据，全部填充到页面，然后整体把页面返回给客户端<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>3. 模版引擎作用：将数据填充到页面模板<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>4. JSP其实就是一种模板引擎<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>优点：弱前端、低成本、速度快<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>缺点：不专业、体验差、效率低、易扯皮<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="实验1：使用普通变量，收集请求参数"><a href="#实验1：使用普通变量，收集请求参数" class="headerlink" title="实验1：使用普通变量，收集请求参数"></a>实验1：使用普通变量，收集请求参数</h3><p><strong>发送请求：</strong><a target="_blank" rel="noopener" href="http://localhost:8080/handle01?username=zhangsan&password=123456&cellphone=13333333333&agreement=on">http://localhost:8080/handle01?username=zhangsan&amp;password=123456&amp;cellphone=13333333333&amp;agreement=on</a></p>
<p><strong>Controller代码</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 请求参数：username=zhangsan&amp;password=12345&amp;cellphone=12345456&amp;agreement=on</span></span><br><span class="line"><span class="comment"> * 要求：变量名和参数名保持一致</span></span><br><span class="line"><span class="comment"> * 1、没有携带：包装类型自动封装为null，基本类型封装为默认值</span></span><br><span class="line"><span class="comment"> * 2、携带：自动封装</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/handle01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">handle01</span><span class="params">(String username,</span></span><br><span class="line"><span class="params">                       String password,</span></span><br><span class="line"><span class="params">                       String cellphone,</span></span><br><span class="line"><span class="params">                       <span class="type">boolean</span> agreement)</span>&#123;</span><br><span class="line">    System.out.println(username);</span><br><span class="line">    System.out.println(password);</span><br><span class="line">    System.out.println(cellphone);</span><br><span class="line">    System.out.println(agreement);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实验2：使用-RequestParam，逐一封装多个参数"><a href="#实验2：使用-RequestParam，逐一封装多个参数" class="headerlink" title="实验2：使用@RequestParam，逐一封装多个参数"></a>实验2：使用@RequestParam，逐一封装多个参数</h3><p><strong>发送请求</strong>：<a target="_blank" rel="noopener" href="http://localhost:8080/handle02?username=zhangsan&password=123456&cellphone=13333333333&agreement=on">http://localhost:8080/handle02?username=zhangsan&amp;password=123456&amp;cellphone=13333333333&amp;agreement=on</a></p>
<p><strong>Controller代码：</strong></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * username=zhangsan&amp;password=123456&amp;cellphone=1234&amp;agreement=on</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@RequestParam</span>: 取出某个参数的值，默认一定要携带。</span></span><br><span class="line"><span class="comment"> *      required = false：非必须携带；</span></span><br><span class="line"><span class="comment"> *      defaultValue = &quot;123456&quot;：默认值，参数可以不带。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 无论请求参数带到了 请求体中还是 url? 后面，他们都是请求参数。都可以直接用<span class="doctag">@RequestParam</span>或者同一个变量名获取到</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">name</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">pwd</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">phone</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">ok</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">&quot;/handle02&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">handle02</span>(<span class="params"><span class="meta">@RequestParam</span>(<span class="string">&quot;username&quot;</span>) <span class="title class_">String</span> name,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestParam</span>(value = <span class="string">&quot;password&quot;</span>,defaultValue = <span class="string">&quot;123456&quot;</span>) <span class="title class_">String</span> pwd,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestParam</span>(<span class="string">&quot;cellphone&quot;</span>) <span class="title class_">String</span> phone,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestParam</span>(value = <span class="string">&quot;agreement&quot;</span>,required = <span class="literal">false</span>) <span class="built_in">boolean</span> ok</span>)&#123;</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(name);</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(pwd);</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(phone);</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(ok);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实验3：使用POJO，统一封装多个参数"><a href="#实验3：使用POJO，统一封装多个参数" class="headerlink" title="实验3：使用POJO，统一封装多个参数"></a>实验3：使用POJO，统一封装多个参数</h3><p><strong>发送请求：</strong>请求体</p>
<p><strong>Controller代码：</strong></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 如果目标方法参数是一个 pojo；SpringMVC 会自动把请求参数 和 pojo 属性进行匹配；</span></span><br><span class="line"><span class="comment"> * 效果：</span></span><br><span class="line"><span class="comment"> *      1、pojo的所有属性值都是来自于请求参数</span></span><br><span class="line"><span class="comment"> *      2、如果请求参数没带，封装为null；</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">person</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//请求体：username=zhangsan&amp;password=111111&amp;cellphone=222222&amp;agreement=on</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">&quot;/handle03&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">handle03</span>(<span class="params"><span class="title class_">Person</span> person</span>)&#123;</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(person);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span> <span class="comment">//JavaBean 定死的数据模型； 定不死的写Map</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// username=zhangsan&amp;password=123456&amp;cellphone=1234&amp;agreement=on</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> username = <span class="string">&quot;zhangsan&quot;</span>; <span class="comment">// request.getParameter(&quot;username&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> password; <span class="comment">// request.getParameter(&quot;password&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> cellphone;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> agreement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实验4：使用-RequestHeader获取请求头数据"><a href="#实验4：使用-RequestHeader获取请求头数据" class="headerlink" title="实验4：使用@RequestHeader获取请求头数据"></a>实验4：使用@RequestHeader获取请求头数据</h3><p><strong>发送请求：</strong>请求头</p>
<p><strong>Controller代码：</strong></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@RequestHeader</span>：获取请求头信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">host</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">ua</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">&quot;/handle04&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">handle04</span>(<span class="params"><span class="meta">@RequestHeader</span>(value = <span class="string">&quot;host&quot;</span>,defaultValue = <span class="string">&quot;127.0.0.1&quot;</span>) <span class="title class_">String</span> host,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestHeader</span>(<span class="string">&quot;user-agent&quot;</span>) <span class="title class_">String</span> ua</span>)&#123;</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(host);</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(ua);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok~&quot;</span>+host;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实验5：使用-CookieValue获取Cookie数据"><a href="#实验5：使用-CookieValue获取Cookie数据" class="headerlink" title="实验5：使用@CookieValue获取Cookie数据"></a>实验5：使用@CookieValue获取Cookie数据</h3><p><strong>发送请求</strong>：自己添加一个cookie，名为 haha，值为任意； 然后发送请求，尝试获取值</p>
<p><strong>Controller代码：</strong></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@CookieValue</span>：获取cookie值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">haha</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">&quot;/handle05&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">handle05</span>(<span class="params"><span class="meta">@CookieValue</span>(<span class="string">&quot;haha&quot;</span>) <span class="title class_">String</span> haha</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok：cookie是：&quot;</span> + haha;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实验6：使用POJO，级联封装复杂对象"><a href="#实验6：使用POJO，级联封装复杂对象" class="headerlink" title="实验6：使用POJO，级联封装复杂对象"></a>实验6：使用POJO，级联封装复杂对象</h3><p><strong>Controller代码</strong></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用pojo级联封装复杂属性</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">person</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">&quot;/handle06&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">handle06</span>(<span class="params"><span class="title class_">Person</span> person</span>)&#123;</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(person);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * username=张三&amp;password=111111&amp;cellphone=122223334&amp;agreement=on</span></span><br><span class="line"><span class="comment"> * &amp;address.province=陕西&amp;address.city=西安市&amp;address.area=雁塔&amp;</span></span><br><span class="line"><span class="comment"> * sex=男&amp;hobby=足球&amp;hobby=篮球&amp;grade=二年级</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span> <span class="comment">//JavaBean 定死的数据模型； 定不死的写Map</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// username=zhangsan&amp;password=123456&amp;cellphone=1234&amp;agreement=on</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> username = <span class="string">&quot;zhangsan&quot;</span>; <span class="comment">// request.getParameter(&quot;username&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> password; <span class="comment">// request.getParameter(&quot;password&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> cellphone;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> agreement;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Address</span> address;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> sex;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span>[] hobby; <span class="comment">// request.getParameterValues(&quot;hobby&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> grade;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> province;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> city;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> area;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实验7：使用-RequestBody，封装JSON对象"><a href="#实验7：使用-RequestBody，封装JSON对象" class="headerlink" title="实验7：使用@RequestBody，封装JSON对象"></a>实验7：使用@RequestBody，封装JSON对象</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@RequestBody</span>: 获取请求体json数据，自动转为person对象</span></span><br><span class="line"><span class="comment"> * 测试接受json数据</span></span><br><span class="line"><span class="comment"> * 1、发出：请求体中是json字符串，不是k=v</span></span><br><span class="line"><span class="comment"> * 2、接受：<span class="doctag">@RequestBody</span> Person person</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@RequestBody</span> Person person</span></span><br><span class="line"><span class="comment"> *      1、拿到请求体中的json字符串</span></span><br><span class="line"><span class="comment"> *      2、把json字符串转为person对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">person</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">&quot;/handle07&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">handle07</span>(<span class="params"><span class="meta">@RequestBody</span> <span class="title class_">Person</span> person</span>)&#123;</span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(person);</span><br><span class="line">    <span class="comment">//自己把字符串转为对象。</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实验8：使用-RequestPart-RequestParam，封装文件，测试文件上传"><a href="#实验8：使用-RequestPart-RequestParam，封装文件，测试文件上传" class="headerlink" title="实验8：使用@RequestPart&#x2F;@RequestParam，封装文件，测试文件上传"></a>实验8：使用@RequestPart&#x2F;@RequestParam，封装文件，测试文件上传</h3><p><strong>Controller代码：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件上传；</span></span><br><span class="line"><span class="comment"> * 1、<span class="doctag">@RequestParam</span> 取出文件项，封装为MultipartFile，就可以拿到文件内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> person</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/handle08&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">handle08</span><span class="params">(Person person,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestParam(&quot;headerImg&quot;)</span> MultipartFile headerImgFile,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestPart(&quot;lifeImg&quot;)</span> MultipartFile[] lifeImgFiles)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1、获取原始文件名</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> headerImgFile.getOriginalFilename();</span><br><span class="line">    <span class="comment">//2、文件大小</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">size</span> <span class="operator">=</span> headerImgFile.getSize();</span><br><span class="line">    <span class="comment">//3、获取文件流</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> headerImgFile.getInputStream();</span><br><span class="line">    System.out.println(originalFilename + <span class="string">&quot; ==&gt; &quot;</span> + size);</span><br><span class="line">    <span class="comment">//4、文件保存</span></span><br><span class="line">    headerImgFile.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\img\\&quot;</span> + originalFilename));</span><br><span class="line">    System.out.println(<span class="string">&quot;===============以上处理了头像=================&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (lifeImgFiles.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (MultipartFile imgFile : lifeImgFiles) &#123;</span><br><span class="line">            imgFile.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\img\\&quot;</span> + imgFile.getOriginalFilename()));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;=======生活照保存结束==========&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(person);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok!!!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实验9：使用HttpEntity，封装请求原始数据"><a href="#实验9：使用HttpEntity，封装请求原始数据" class="headerlink" title="实验9：使用HttpEntity，封装请求原始数据"></a>实验9：使用HttpEntity，封装请求原始数据</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HttpEntity：封装请求头、请求体； 把整个请求拿过来</span></span><br><span class="line"><span class="comment"> *    泛型：&lt;String&gt;：请求体类型； 可以自动转化</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/handle09&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">handle09</span><span class="params">(HttpEntity&lt;Person&gt; entity)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1、拿到所有请求头</span></span><br><span class="line">    <span class="type">HttpHeaders</span> <span class="variable">headers</span> <span class="operator">=</span> entity.getHeaders();</span><br><span class="line">    System.out.println(<span class="string">&quot;请求头：&quot;</span>+headers);</span><br><span class="line">    <span class="comment">//2、拿到请求体</span></span><br><span class="line">    <span class="type">Person</span> <span class="variable">body</span> <span class="operator">=</span> entity.getBody();</span><br><span class="line">    System.out.println(<span class="string">&quot;请求体：&quot;</span>+body);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Ok~~~&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实验10：使用原生Servlet-API，获取原生请求对象"><a href="#实验10：使用原生Servlet-API，获取原生请求对象" class="headerlink" title="实验10：使用原生Servlet API，获取原生请求对象"></a>实验10：使用原生Servlet API，获取原生请求对象</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 接受原生 API</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/handle10&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handle10</span><span class="params">(HttpServletRequest request,</span></span><br><span class="line"><span class="params">                       HttpServletResponse response,</span></span><br><span class="line"><span class="params">                     HttpMethod method)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;请求方式：&quot;</span>+method);</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    System.out.println(username);</span><br><span class="line">    response.getWriter().write(<span class="string">&quot;ok!!!&quot;</span>+username);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>常见接收三种数据的办法</p>
<h3 id="接收普通参数"><a href="#接收普通参数" class="headerlink" title="接收普通参数"></a>接收普通参数</h3><blockquote>
<p>无论是GET请求，还是POST请求，携带的 k&#x3D;v&amp;k&#x3D;v数据；还是请求头的数据</p>
</blockquote>
<p><strong>使用实验1-6的方式：</strong></p>
<ol>
<li><strong>直接写变量名</strong></li>
<li><strong>@RequestParam、@RequestHeader、@CookieValue</strong> 注解</li>
<li><strong>POJO</strong></li>
</ol>
<h3 id="接收JSON数据"><a href="#接收JSON数据" class="headerlink" title="接收JSON数据"></a>接收JSON数据</h3><p>JSON数据放在请求体中。使用 @ReqeustBody + 对象；直接获取数据并封装为对象</p>
<h3 id="接收文件上传"><a href="#接收文件上传" class="headerlink" title="接收文件上传"></a>接收文件上传</h3><p><strong>@RequestParam&#x2F;@RequestPart</strong>  可以获取普通项或者文件项；</p>
<p><strong>@RequestPart (“imgs”)  MultipartFile[] files</strong></p>
<h1 id="响应处理"><a href="#响应处理" class="headerlink" title="响应处理"></a>响应处理</h1><h2 id="实验1：返回JSON数据"><a href="#实验1：返回JSON数据" class="headerlink" title="实验1：返回JSON数据"></a>实验1：返回JSON数据</h2><p>注意：SpringMVC 底层使用 HttpMessageConverter 处理json数据的序列化与反序列化</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 会自动的把返回的对象转为json格式</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ResponseBody</span> <span class="comment">//把返回的内容。写到响应体中</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">&quot;/resp01&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_">Person</span> <span class="title function_">resp01</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Person</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    person.<span class="title function_">setUsername</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">    person.<span class="title function_">setPassword</span>(<span class="string">&quot;1111&quot;</span>);</span><br><span class="line">    person.<span class="title function_">setCellphone</span>(<span class="string">&quot;22222&quot;</span>);</span><br><span class="line">    person.<span class="title function_">setAgreement</span>(<span class="literal">false</span>);</span><br><span class="line">    person.<span class="title function_">setSex</span>(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">    person.<span class="title function_">setHobby</span>(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;足球&quot;</span>, <span class="string">&quot;篮球&quot;</span>&#125;);</span><br><span class="line">    person.<span class="title function_">setGrade</span>(<span class="string">&quot;三年级&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> person;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="实验2：文件下载"><a href="#实验2：文件下载" class="headerlink" title="实验2：文件下载"></a>实验2：文件下载</h2><p>基本原理：</p>
<ol>
<li><strong>写出的数据必须告诉浏览器数据类型</strong>。文件下载需要两个<ol>
<li><code>Content-Type：application/octet-stream </code>；内容类型：二进制流</li>
<li><code>Content-Disposition：attachment;filename=哈哈美女.jpg</code>；内容处置方式：附件；文件名&#x3D;xx<ol>
<li>注意：文件名有可能有中文，所以需要提前进行URL编码</li>
</ol>
</li>
</ol>
</li>
<li><strong>二进制流写出要小心OOM；</strong><ol>
<li><code>InputStreamResource resource = new InputStreamResource(inputStream);</code></li>
</ol>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文件下载</span></span><br><span class="line"><span class="comment">     * HttpEntity：拿到整个请求数据</span></span><br><span class="line"><span class="comment">     * ResponseEntity：拿到整个响应数据（响应头、响应体、状态码）</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/download&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;InputStreamResource&gt; <span class="title function_">download</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//以上代码永远别改</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;C:\\Users\\53409\\Pictures\\Saved Pictures\\必应壁纸（1200张）\\AutumnNeuschwanstein_EN-AU10604288553_1920x1080.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">//一口气读会溢出</span></span><br><span class="line"><span class="comment">//        byte[] bytes = inputStream.readAllBytes();</span></span><br><span class="line">        <span class="comment">//1、文件名中文会乱码：解决：</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">encode</span> <span class="operator">=</span> URLEncoder.encode(<span class="string">&quot;哈哈美女.jpg&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">//以下代码永远别改</span></span><br><span class="line">        <span class="comment">//2、文件太大会oom（内存溢出）</span></span><br><span class="line">        <span class="type">InputStreamResource</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamResource</span>(inputStream);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok()</span><br><span class="line">                <span class="comment">//内容类型：流</span></span><br><span class="line">                .contentType(MediaType.APPLICATION_OCTET_STREAM)</span><br><span class="line">                <span class="comment">//内容大小</span></span><br><span class="line">                .contentLength(inputStream.available())</span><br><span class="line">                <span class="comment">//  Content-Disposition ：内容处理方式</span></span><br><span class="line">                .header(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span>+encode)</span><br><span class="line">                .body(resource);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>这种方式会OOM</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;<span class="type">byte</span>[]&gt; handleDownload() <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">byte</span>[] bytes = Files.readAllBytes(Paths.get(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;aaaa.png&quot;</span>).toURI()));</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity</span><br><span class="line">            .ok()</span><br><span class="line">            .header(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=aaaa.png&quot;</span>)</span><br><span class="line">            .contentType(MediaType.APPLICATION_OCTET_STREAM)</span><br><span class="line">            .contentLength(bytes.length)</span><br><span class="line">            .body(bytes);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="RESTful-CRUD：案例"><a href="#RESTful-CRUD：案例" class="headerlink" title="RESTful - CRUD：案例"></a>RESTful - CRUD：案例</h1><h2 id="RESTful"><a href="#RESTful" class="headerlink" title="RESTful"></a>RESTful</h2><h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><p><strong>REST</strong>（Representational State Transfer 表现层状态转移）是一种软件架构风格； </p>
<blockquote>
<p>官网：<a target="_blank" rel="noopener" href="https://restfulapi.net/">https://restfulapi.net/</a></p>
</blockquote>
<p><strong>完整理解</strong>：<strong>Resource Representational State Transfer</strong></p>
<ul>
<li><strong>Resource</strong>：资源</li>
<li><strong>Representational</strong>：表现形式：比如用JSON，XML，JPEG等</li>
<li><strong>State Transfer</strong>：状态变化：<strong>通过HTTP的动词（GET、POST、PUT、DELETE）实现</strong></li>
</ul>
<p><em><strong>一句话：使用资源名作为URI，使用HTTP的请求方式表示对资源的操作</strong></em></p>
<p><strong>满足REST 风格的系统，我们称为是 RESTful 系统</strong></p>
<h3 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h3><p><strong>RESTful API 以前，接口的设计可能是这样的</strong></p>
<ul>
<li>**<code>/getEmployee?id=1</code>**：查询员工  </li>
<li>**<code>/addEmployee?name=zhangsan&amp;age=18</code>**：新增员工</li>
<li>**<code>/updateEmployee?id=1&amp;age=20</code>**：修改员工</li>
<li>**<code>/deleteEmployee?id=1</code>**：删除员工</li>
<li>**<code>/getEmployeeList</code>**：获取所有员工</li>
</ul>
<h3 id="路径变量-PathVariable"><a href="#路径变量-PathVariable" class="headerlink" title="路径变量 - @PathVariable"></a>路径变量 - @PathVariable</h3><blockquote>
<p>RESTful的接口中，经常路径的某些位置是动态的。比如<code> /employee/``&#123;id&#125;</code>；这个id 可能是6、7、8、9等；</p>
<p>这时我们程序就需要能获取到这个动态的值。SpringMVC 提供了<code> @PathVariable</code> 注解获取路径变量的值；</p>
<p>语法规则如下：</p>
</blockquote>
<ol>
<li><code>/resources/&#123;name&#125;</code>：{} 中的值封装到 name 变量中</li>
<li><code>/resources/&#123;*path&#125;</code>：{} 中的值封装到 path 变量中；可以获取多层路径<ol>
<li>**<code>/resources/image.png</code>**： path &#x3D; &#x2F;image.png</li>
<li>**<code>/resources/css/spring.css</code>**：path &#x3D; &#x2F;css&#x2F;spring.css</li>
</ol>
</li>
<li><code>/resources/&#123;filename:\\w+&#125;.dat</code>：{} 中的值封装到 filename 变量中; <ol>
<li>filename 满足 \w+ 正则要求 </li>
<li>**<code>/resources/&#123;</code><strong><strong><code>filename</code></strong></strong><code>:</code><strong><strong><code>\\w+</code></strong></strong><code>&#125;.dat</code>**；如：&#x2F;resources&#x2F;xxx.dat：xxx是一个或多个字母</li>
</ol>
</li>
</ol>
<h2 id="CRUD-案例"><a href="#CRUD-案例" class="headerlink" title="CRUD 案例"></a>CRUD 案例</h2><h3 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h3><ol>
<li>规划 RESTful 接口</li>
<li>创建统一返回 R 对象</li>
<li>实现简单的 CRUD，暂不考虑复杂查询与分页查询</li>
<li>测试 CRUD 的功能</li>
<li>前端联动测试 <ol>
<li>找到 <strong>资料</strong> 中 <strong>nginx.zip</strong>，解压到 <strong>非中文无空格</strong> 目录下</li>
<li>运行 <strong>nginx.exe</strong>，访问 <strong>localhost</strong> 即可访问前端项目</li>
<li>前端项目源码为 <strong>rest-crud-vue.zip</strong>，学完前端工程化，就可以二次开发</li>
</ol>
</li>
</ol>
<p><strong>注意：还要解决 跨域问题</strong></p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>创建数据库：restful_crud</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Dump SQL</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : localhost_3306</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 80027 (8.0.27)</span></span><br><span class="line"><span class="comment"> Source Host           : localhost:3306</span></span><br><span class="line"><span class="comment"> Source Schema         : restful_crud</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 80027 (8.0.27)</span></span><br><span class="line"><span class="comment"> File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 20/08/2024 18:46:17</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for employee</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `employee`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `employee`  (</span><br><span class="line">  `id` <span class="type">bigint</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;员工名字&#x27;</span>,</span><br><span class="line">  `age` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">  `gender` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">  `address` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;住址&#x27;</span>,</span><br><span class="line">  `salary` <span class="type">decimal</span>(<span class="number">10</span>, <span class="number">2</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;薪资&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB AUTO_INCREMENT <span class="operator">=</span> <span class="number">5</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8mb4 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8mb4_0900_ai_ci ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of employee</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employee` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;张三&#x27;</span>, <span class="number">11</span>, <span class="string">&#x27;aa@qq.com&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;西安&#x27;</span>, <span class="number">9999.00</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employee` <span class="keyword">VALUES</span> (<span class="number">4</span>, <span class="string">&#x27;leifengyang&#x27;</span>, <span class="number">10</span>, <span class="string">&#x27;aaa&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;sss&#x27;</span>, <span class="number">100.00</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h3 id="统一返回R"><a href="#统一返回R" class="headerlink" title="统一返回R"></a>统一返回R</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">package com.<span class="property">lfy</span>.<span class="property">practice</span>.<span class="property">common</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.<span class="property">Data</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Integer</span> code;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> msg;</span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>&lt;T&gt; R&lt;T&gt; <span class="title function_">ok</span>(<span class="params">T data</span>)&#123;</span><br><span class="line">        R&lt;T&gt; tr = <span class="keyword">new</span> R&lt;&gt;();</span><br><span class="line">        tr.<span class="title function_">setCode</span>(<span class="number">200</span>);</span><br><span class="line">        tr.<span class="title function_">setMsg</span>(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">        tr.<span class="title function_">setData</span>(data);</span><br><span class="line">        <span class="keyword">return</span> tr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">ok</span>(<span class="params"></span>)&#123;</span><br><span class="line">        R tr = <span class="keyword">new</span> R&lt;&gt;();</span><br><span class="line">        tr.<span class="title function_">setCode</span>(<span class="number">200</span>);</span><br><span class="line">        tr.<span class="title function_">setMsg</span>(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> tr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">error</span>(<span class="params"></span>)&#123;</span><br><span class="line">        R tr = <span class="keyword">new</span> R&lt;&gt;();</span><br><span class="line">        tr.<span class="title function_">setCode</span>(<span class="number">500</span>); <span class="comment">//默认失败码</span></span><br><span class="line">        tr.<span class="title function_">setMsg</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> tr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">error</span>(<span class="params"><span class="title class_">Integer</span> code,<span class="title class_">String</span> msg</span>)&#123;</span><br><span class="line">        R tr = <span class="keyword">new</span> R&lt;&gt;();</span><br><span class="line">        tr.<span class="title function_">setCode</span>(code); <span class="comment">//默认失败码</span></span><br><span class="line">        tr.<span class="title function_">setMsg</span>(msg);</span><br><span class="line">        <span class="keyword">return</span> tr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">error</span>(<span class="params"><span class="title class_">Integer</span> code,<span class="title class_">String</span> msg,<span class="title class_">Object</span> data</span>)&#123;</span><br><span class="line">        R tr = <span class="keyword">new</span> R&lt;&gt;();</span><br><span class="line">        tr.<span class="title function_">setCode</span>(code); <span class="comment">//默认失败码</span></span><br><span class="line">        tr.<span class="title function_">setMsg</span>(msg);</span><br><span class="line">        tr.<span class="title function_">setData</span>(data);</span><br><span class="line">        <span class="keyword">return</span> tr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Employee-模型"><a href="#Employee-模型" class="headerlink" title="Employee - 模型"></a>Employee - 模型</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">package com.<span class="property">lfy</span>.<span class="property">practice</span>.<span class="property">bean</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.<span class="property">Data</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.<span class="property">math</span>.<span class="property">BigDecimal</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Long</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> name;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Integer</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> email;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> gender;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> address;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">BigDecimal</span> salary;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Service-业务层"><a href="#Service-业务层" class="headerlink" title="Service - 业务层"></a>Service - 业务层</h3><h4 id="service接口"><a href="#service接口" class="headerlink" title="service接口"></a>service接口</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lfy.practice.service.impl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.dao.EmployeeDao;</span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.service.EmployeeService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span> <span class="comment">// 要求：controller只能调service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeDao employeeDao; <span class="comment">//包装一下</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">getEmp</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">empById</span> <span class="operator">=</span> employeeDao.getEmpById(id);</span><br><span class="line">        <span class="keyword">return</span> empById;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//防null处理。考虑到service是被controller调用的；</span></span><br><span class="line">        <span class="comment">//controller层传过来的employee 的某些属性可能为null，所以先处理一下</span></span><br><span class="line">        <span class="comment">//怎么处理？</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">id</span> <span class="operator">=</span> employee.getId();</span><br><span class="line">        <span class="keyword">if</span>(id == <span class="literal">null</span>)&#123; <span class="comment">//页面没有带id</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//1、去数据库查询employee原来的值</span></span><br><span class="line">        <span class="type">Employee</span> <span class="variable">empById</span> <span class="operator">=</span> employeeDao.getEmpById(id);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//=======以下用页面值覆盖默认值=============</span></span><br><span class="line">        <span class="comment">//2、把页面带来的覆盖原来的值，页面没带的自然保持原装</span></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasText(employee.getName()))&#123; <span class="comment">//判断name有值（不是null、不是空串、不是空白字符// ）</span></span><br><span class="line">            <span class="comment">//把数据库的值改为页面传来的值</span></span><br><span class="line">            empById.setName(employee.getName());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasText(employee.getEmail()))&#123;</span><br><span class="line">            empById.setEmail(employee.getEmail());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasText(employee.getAddress()))&#123;</span><br><span class="line">            empById.setAddress(employee.getAddress());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasText(employee.getGender()))&#123;</span><br><span class="line">            empById.setGender(employee.getGender());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(employee.getAge() != <span class="literal">null</span>)&#123;</span><br><span class="line">            empById.setAge(employee.getAge());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(employee.getSalary() != <span class="literal">null</span>)&#123;</span><br><span class="line">            empById.setSalary(employee.getSalary());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//以上判断，把页面提交的值，赋值给数据库的记录</span></span><br><span class="line">        employeeDao.updateEmp(empById);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        employeeDao.addEmp(employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteEmp</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        employeeDao.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> employeeDao.getList();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Service-业务层-1"><a href="#Service-业务层-1" class="headerlink" title="Service - 业务层"></a>Service - 业务层</h3><h4 id="service接口-1"><a href="#service接口-1" class="headerlink" title="service接口"></a>service接口</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lfy.practice.service.impl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.dao.EmployeeDao;</span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.service.EmployeeService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span> <span class="comment">// 要求：controller只能调service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeDao employeeDao; <span class="comment">//包装一下</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">getEmp</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">empById</span> <span class="operator">=</span> employeeDao.getEmpById(id);</span><br><span class="line">        <span class="keyword">return</span> empById;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//防null处理。考虑到service是被controller调用的；</span></span><br><span class="line">        <span class="comment">//controller层传过来的employee 的某些属性可能为null，所以先处理一下</span></span><br><span class="line">        <span class="comment">//怎么处理？</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">id</span> <span class="operator">=</span> employee.getId();</span><br><span class="line">        <span class="keyword">if</span>(id == <span class="literal">null</span>)&#123; <span class="comment">//页面没有带id</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//1、去数据库查询employee原来的值</span></span><br><span class="line">        <span class="type">Employee</span> <span class="variable">empById</span> <span class="operator">=</span> employeeDao.getEmpById(id);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//=======以下用页面值覆盖默认值=============</span></span><br><span class="line">        <span class="comment">//2、把页面带来的覆盖原来的值，页面没带的自然保持原装</span></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasText(employee.getName()))&#123; <span class="comment">//判断name有值（不是null、不是空串、不是空白字符// ）</span></span><br><span class="line">            <span class="comment">//把数据库的值改为页面传来的值</span></span><br><span class="line">            empById.setName(employee.getName());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasText(employee.getEmail()))&#123;</span><br><span class="line">            empById.setEmail(employee.getEmail());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasText(employee.getAddress()))&#123;</span><br><span class="line">            empById.setAddress(employee.getAddress());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasText(employee.getGender()))&#123;</span><br><span class="line">            empById.setGender(employee.getGender());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(employee.getAge() != <span class="literal">null</span>)&#123;</span><br><span class="line">            empById.setAge(employee.getAge());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(employee.getSalary() != <span class="literal">null</span>)&#123;</span><br><span class="line">            empById.setSalary(employee.getSalary());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//以上判断，把页面提交的值，赋值给数据库的记录</span></span><br><span class="line">        employeeDao.updateEmp(empById);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        employeeDao.addEmp(employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteEmp</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        employeeDao.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> employeeDao.getList();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="service实现"><a href="#service实现" class="headerlink" title="service实现"></a>service实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lfy.practice.service.impl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.dao.EmployeeDao;</span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.service.EmployeeService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span> <span class="comment">// 要求：controller只能调service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeDao employeeDao; <span class="comment">//包装一下</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">getEmp</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">empById</span> <span class="operator">=</span> employeeDao.getEmpById(id);</span><br><span class="line">        <span class="keyword">return</span> empById;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//防null处理。考虑到service是被controller调用的；</span></span><br><span class="line">        <span class="comment">//controller层传过来的employee 的某些属性可能为null，所以先处理一下</span></span><br><span class="line">        <span class="comment">//怎么处理？</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">id</span> <span class="operator">=</span> employee.getId();</span><br><span class="line">        <span class="keyword">if</span>(id == <span class="literal">null</span>)&#123; <span class="comment">//页面没有带id</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//1、去数据库查询employee原来的值</span></span><br><span class="line">        <span class="type">Employee</span> <span class="variable">empById</span> <span class="operator">=</span> employeeDao.getEmpById(id);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//=======以下用页面值覆盖默认值=============</span></span><br><span class="line">        <span class="comment">//2、把页面带来的覆盖原来的值，页面没带的自然保持原装</span></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasText(employee.getName()))&#123; <span class="comment">//判断name有值（不是null、不是空串、不是空白字符// ）</span></span><br><span class="line">            <span class="comment">//把数据库的值改为页面传来的值</span></span><br><span class="line">            empById.setName(employee.getName());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasText(employee.getEmail()))&#123;</span><br><span class="line">            empById.setEmail(employee.getEmail());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasText(employee.getAddress()))&#123;</span><br><span class="line">            empById.setAddress(employee.getAddress());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasText(employee.getGender()))&#123;</span><br><span class="line">            empById.setGender(employee.getGender());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(employee.getAge() != <span class="literal">null</span>)&#123;</span><br><span class="line">            empById.setAge(employee.getAge());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(employee.getSalary() != <span class="literal">null</span>)&#123;</span><br><span class="line">            empById.setSalary(employee.getSalary());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//以上判断，把页面提交的值，赋值给数据库的记录</span></span><br><span class="line">        employeeDao.updateEmp(empById);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        employeeDao.addEmp(employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteEmp</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        employeeDao.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> employeeDao.getList();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Dao-数据访问层"><a href="#Dao-数据访问层" class="headerlink" title="Dao - 数据访问层"></a>Dao - 数据访问层</h3><h4 id="Dao接口"><a href="#Dao接口" class="headerlink" title="Dao接口"></a>Dao接口</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lfy.practice.dao;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.bean.Employee;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeDao</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id查询用户信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Employee <span class="title function_">getEmpById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增员工</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">addEmp</span><span class="params">(Employee employee)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改员工</span></span><br><span class="line"><span class="comment">     * 注意：传入Employee全部的值，不改的传入原来值，如果不传代表改为null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateEmp</span><span class="params">(Employee employee)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 按照id删除员工</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询所有</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Employee&gt; <span class="title function_">getList</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Dao实现"><a href="#Dao实现" class="headerlink" title="Dao实现"></a>Dao实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lfy.practice.dao.impl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.lfy.practice.dao.EmployeeDao;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.BeanPropertyRowMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">EmployeeDao</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">getEmpById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from employee where id=?&quot;</span>;</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(Employee.class), id);</span><br><span class="line">        <span class="keyword">return</span> employee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into employee(name,age,email,gender,address,salary) values (?,?,?,?,?,?)&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql,</span><br><span class="line">                employee.getName(),</span><br><span class="line">                employee.getAge(),</span><br><span class="line">                employee.getEmail(),</span><br><span class="line">                employee.getGender(),</span><br><span class="line">                employee.getAddress(),</span><br><span class="line">                employee.getSalary());</span><br><span class="line">        System.out.println(<span class="string">&quot;新增成功，影响行数：&quot;</span> + update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update employee set name=?,age=?,email=?,gender=?,address=?,salary=? where id=?&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql,</span><br><span class="line">                employee.getName(),</span><br><span class="line">                employee.getAge(),</span><br><span class="line">                employee.getEmail(),</span><br><span class="line">                employee.getGender(),</span><br><span class="line">                employee.getAddress(),</span><br><span class="line">                employee.getSalary(),</span><br><span class="line">                employee.getId());</span><br><span class="line">        System.out.println(<span class="string">&quot;更新成功，影响行数：&quot;</span> + update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from employee where id=?&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> jdbcTemplate.update(sql, id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from employee&quot;</span>;</span><br><span class="line">        List&lt;Employee&gt; list = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(Employee.class));</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Controller-控制器"><a href="#Controller-控制器" class="headerlink" title="Controller - 控制器"></a>Controller - 控制器</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">package com.<span class="property">lfy</span>.<span class="property">practice</span>.<span class="property">controller</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.<span class="property">lfy</span>.<span class="property">practice</span>.<span class="property">common</span>.<span class="property">R</span>;</span><br><span class="line"><span class="keyword">import</span> com.<span class="property">lfy</span>.<span class="property">practice</span>.<span class="property">bean</span>.<span class="property">Employee</span>;</span><br><span class="line"><span class="keyword">import</span> com.<span class="property">lfy</span>.<span class="property">practice</span>.<span class="property">service</span>.<span class="property">EmployeeService</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">beans</span>.<span class="property">factory</span>.<span class="property">annotation</span>.<span class="property">Autowired</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.<span class="property">util</span>.<span class="property">List</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * CORS policy：同源策略（限制ajax请求，图片，css，js）； 跨域问题</span></span><br><span class="line"><span class="comment"> * 跨源资源共享（CORS）（Cross-Origin Resource Sharing）</span></span><br><span class="line"><span class="comment"> *    浏览器为了安全，默认会遵循同源策略（请求要去的服务器和当前项目所在的服务器必须是同一个源[同一个服务器]），如果不是，请求就会被拦截</span></span><br><span class="line"><span class="comment"> *    复杂的跨域请求会发送2次：</span></span><br><span class="line"><span class="comment"> *    1、options 请求：预检请求。浏览器会先发送options请求，询问服务器是否允许当前域名进行跨域访问</span></span><br><span class="line"><span class="comment"> *    2、真正的请求：POST、DELETE、PUT等</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 浏览器页面所在的：http://localhost   /employee/base</span></span><br><span class="line"><span class="comment"> * 页面上要发去的请求：http://localhost:8080   /api/v1/employees</span></span><br><span class="line"><span class="comment"> *  /以前的东西，必须完全一样，一个字母不一样都不行。浏览器才能把请求（ajax）发出去。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  跨域问题：</span></span><br><span class="line"><span class="comment"> *    1、前端自己解决：</span></span><br><span class="line"><span class="comment"> *    2、后端解决：允许前端跨域即可</span></span><br><span class="line"><span class="comment"> *          原理：服务器给浏览器的响应头中添加字段：Access-Control-Allow-Origin = *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@CrossOrigin</span>  <span class="comment">//允许跨域</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">&quot;/api/v1&quot;</span>)</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeRestController</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="title class_">EmployeeService</span> employeeService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * code：业务的状态码，200是成功，剩下都是失败; 前后端将来会一起商定不同的业务状态码前端要显示不同效果。</span></span><br><span class="line"><span class="comment">     * msg：服务端返回给前端的提示消息</span></span><br><span class="line"><span class="comment">     * data： 服务器返回给前端的数据</span></span><br><span class="line"><span class="comment">     *   &#123;</span></span><br><span class="line"><span class="comment">     *       &quot;code&quot;: 300,</span></span><br><span class="line"><span class="comment">     *       &quot;msg&quot;: &quot;余额不足&quot;,</span></span><br><span class="line"><span class="comment">     *       &quot;data&quot;: null</span></span><br><span class="line"><span class="comment">     *   &#125;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *   前端统一处理:</span></span><br><span class="line"><span class="comment">     *      1、前端发送请求，接受服务器数据</span></span><br><span class="line"><span class="comment">     *      2、判断状态码，成功就显示数据，失败就显示提示消息（或者执行其他操作）。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 按照id查询员工</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">id</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * /employee/1/2/3</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/employee/&#123;id&#125;&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">get</span>(<span class="params"><span class="meta">@PathVariable</span>(<span class="string">&quot;id&quot;</span>) <span class="title class_">Long</span> id</span>)&#123;</span><br><span class="line">        <span class="title class_">Employee</span> emp = employeeService.<span class="title function_">getEmp</span>(id);</span><br><span class="line">        <span class="keyword">return</span> R.<span class="title function_">ok</span>(emp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增员工；</span></span><br><span class="line"><span class="comment">     * 要求：前端发送请求把员工的json放在请求体中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">employee</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">&quot;/employee&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">add</span>(<span class="params"><span class="meta">@RequestBody</span> <span class="title class_">Employee</span> employee</span>)&#123;</span><br><span class="line">        employeeService.<span class="title function_">saveEmp</span>(employee);</span><br><span class="line">        <span class="keyword">return</span> R.<span class="title function_">ok</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改员工</span></span><br><span class="line"><span class="comment">     * 要求：前端发送请求把员工的json放在请求体中； 必须携带id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">employee</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PutMapping</span>(<span class="string">&quot;/employee&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">update</span>(<span class="params"><span class="meta">@RequestBody</span> <span class="title class_">Employee</span> employee</span>)&#123;</span><br><span class="line">        employeeService.<span class="title function_">updateEmp</span>(employee);</span><br><span class="line">        <span class="keyword">return</span> R.<span class="title function_">ok</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *   <span class="doctag">@XxxMapping</span>(&quot;/employee&quot;)：Rest 映射注解</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">id</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">&quot;/employee/&#123;id&#125;&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">delete</span>(<span class="params"><span class="meta">@PathVariable</span>(<span class="string">&quot;id&quot;</span>) <span class="title class_">Long</span> id</span>)&#123;</span><br><span class="line">        employeeService.<span class="title function_">deleteEmp</span>(id);</span><br><span class="line">        <span class="keyword">return</span> R.<span class="title function_">ok</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//语义化</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/employees&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">all</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="title class_">List</span>&lt;<span class="title class_">Employee</span>&gt; employees = employeeService.<span class="title function_">getList</span>();</span><br><span class="line">       <span class="keyword">return</span> R.<span class="title function_">ok</span>(employees);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h1><h2 id="拦截器：HandlerInterceptor"><a href="#拦截器：HandlerInterceptor" class="headerlink" title="拦截器：HandlerInterceptor"></a>拦截器：HandlerInterceptor</h2><h3 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h3><p><strong>SpringMVC 内置拦截器机制</strong> ，允许<strong>在请求被目标方法处理的前后进行拦截</strong>，执行一些额外操作；比如：权限验证、日志记录、数据共享等…</p>
<p><strong>使用步骤</strong></p>
<ol>
<li>实现 HandlerInterceptor 接口的组件即可成为拦截器</li>
<li>创建 WebMvcConfigurer 组件，并配置拦截器的拦截路径</li>
<li>查看执行顺序效果：preHandle &#x3D;&gt; 目标方法 &#x3D;&gt; postHandle &#x3D;&gt; afterCompletion</li>
</ol>
<h3 id="拦截器配置"><a href="#拦截器配置" class="headerlink" title="拦截器配置"></a>拦截器配置</h3><p>拦截器代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.practice.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//拦截器还需要配置（告诉SpringMVC，这个拦截器主要拦截什么请求）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHandlerInterceptor0</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request,</span></span><br><span class="line"><span class="params">                             HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyHandlerInterceptor0...preHandle...&quot;</span>);</span><br><span class="line">        <span class="comment">//放行； chain.doFilter(request,response);</span></span><br><span class="line">        <span class="comment">//String username = request.getParameter(&quot;username&quot;);</span></span><br><span class="line"><span class="comment">//        response.getWriter().write(&quot;No Permission!&quot;);</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyHandlerInterceptor0...postHandle...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyHandlerInterceptor0...afterCompletion...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>拦截器配置</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.practice.config;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.practice.interceptor.MyHandlerInterceptor0;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.practice.interceptor.MyHandlerInterceptor1;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.practice.interceptor.MyHandlerInterceptor2;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1、容器中需要有这样一个组件：【WebMvcConfigurer】</span></span><br><span class="line"><span class="comment"> *     1)、<span class="doctag">@Bean</span> 放一个 WebMvcConfigurer</span></span><br><span class="line"><span class="comment"> *     2)、配置类实现 WebMvcConfigurer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//专门对SpringMVC 底层做一些配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySpringMVCConfig</span>  <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MyHandlerInterceptor0 myHandlerInterceptor0;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MyHandlerInterceptor1 myHandlerInterceptor1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MyHandlerInterceptor2 myHandlerInterceptor2;</span><br><span class="line">    <span class="comment">//添加拦截器</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(myHandlerInterceptor0)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>); <span class="comment">//拦截所有请求</span></span><br><span class="line">        registry.addInterceptor(myHandlerInterceptor1)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>); <span class="comment">//拦截所有请求</span></span><br><span class="line"></span><br><span class="line">        registry.addInterceptor(myHandlerInterceptor2)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//    @Bean</span></span><br><span class="line"><span class="comment">//    WebMvcConfigurer webMvcConfigurer()&#123;</span></span><br><span class="line"><span class="comment">//        return new WebMvcConfigurer() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public void addInterceptors(InterceptorRegistry registry) &#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="拦截器执行顺序"><a href="#拦截器执行顺序" class="headerlink" title="拦截器执行顺序"></a>拦截器执行顺序</h3><p><strong>拦截器执行顺序</strong>：<code>顺序preHandle</code>&#x3D;&gt;<code>目标方法</code>&#x3D;&gt;<code>倒序postHandle</code>&#x3D;&gt;<code>渲染</code>&#x3D;&gt;<code>倒序afterCompletion</code></p>
<ol>
<li>只有执行成功的 <code>preHandle </code>会倒序执行 <code>afterCompletion</code></li>
<li><code>postHandle </code>、<code>afterCompletion </code>从哪里炸，倒序链路从哪里结束</li>
<li><code>postHandle </code>失败不会影响 <code>afterCompletion  </code>执行</li>
</ol>
<blockquote>
<p>以下是多拦截器执行顺序流程图</p>
</blockquote>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p><strong>SpringMVC 提供了非常方便的声明式异常处理</strong>；</p>
<ol>
<li><strong>编程式异常处理</strong>：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">try - catch、throw、exception</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>声明式异常处理：</strong><ol>
<li>**<code>SpringMVC</code>**提供了 <strong><code>@ExceptionHandler</code><strong>、</strong><code>@ControllerAdvice</code></strong> 等便捷的声明式注解来进行快速的异常处理</li>
<li>**<code>@ExceptionHandler</code>**：可以处理指定类型异常</li>
<li>**<code>@ControllerAdvice</code>**：可以集中处理所有Controller的异常</li>
<li><strong><code>@ExceptionHandler</code></strong> + **<code>@ControllerAdvice</code>**： 可以完成全局统一异常处理</li>
</ol>
</li>
</ol>
<h3 id="通用逻辑"><a href="#通用逻辑" class="headerlink" title="通用逻辑"></a>通用逻辑</h3><h4 id="统一返回：R对象"><a href="#统一返回：R对象" class="headerlink" title="统一返回：R对象"></a>统一返回：R对象</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">practice</span>.<span class="property">common</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.<span class="property">swagger</span>.<span class="property">v3</span>.<span class="property">oas</span>.<span class="property">annotations</span>.<span class="property">media</span>.<span class="property">Schema</span>;</span><br><span class="line"><span class="keyword">import</span> lombok.<span class="property">Data</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Schema</span>(description = <span class="string">&quot;统一返回&quot;</span>)</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema</span>(description = <span class="string">&quot;状态码&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Integer</span> code;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema</span>(description = <span class="string">&quot;提示信息&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> msg;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema</span>(description = <span class="string">&quot;数据&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>&lt;T&gt; R&lt;T&gt; <span class="title function_">ok</span>(<span class="params">T data</span>)&#123;</span><br><span class="line">        R&lt;T&gt; tr = <span class="keyword">new</span> R&lt;&gt;();</span><br><span class="line">        tr.<span class="title function_">setCode</span>(<span class="number">200</span>);</span><br><span class="line">        tr.<span class="title function_">setMsg</span>(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">        tr.<span class="title function_">setData</span>(data);</span><br><span class="line">        <span class="keyword">return</span> tr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">ok</span>(<span class="params"></span>)&#123;</span><br><span class="line">        R tr = <span class="keyword">new</span> R&lt;&gt;();</span><br><span class="line">        tr.<span class="title function_">setCode</span>(<span class="number">200</span>);</span><br><span class="line">        tr.<span class="title function_">setMsg</span>(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> tr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">error</span>(<span class="params"></span>)&#123;</span><br><span class="line">        R tr = <span class="keyword">new</span> R&lt;&gt;();</span><br><span class="line">        tr.<span class="title function_">setCode</span>(<span class="number">500</span>); <span class="comment">//默认失败码</span></span><br><span class="line">        tr.<span class="title function_">setMsg</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> tr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">error</span>(<span class="params"><span class="title class_">Integer</span> code,<span class="title class_">String</span> msg</span>)&#123;</span><br><span class="line">        R tr = <span class="keyword">new</span> R&lt;&gt;();</span><br><span class="line">        tr.<span class="title function_">setCode</span>(code); <span class="comment">//默认失败码</span></span><br><span class="line">        tr.<span class="title function_">setMsg</span>(msg);</span><br><span class="line">        <span class="keyword">return</span> tr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">error</span>(<span class="params"><span class="title class_">Integer</span> code,<span class="title class_">String</span> msg,<span class="title class_">Object</span> data</span>)&#123;</span><br><span class="line">        R tr = <span class="keyword">new</span> R&lt;&gt;();</span><br><span class="line">        tr.<span class="title function_">setCode</span>(code); <span class="comment">//默认失败码</span></span><br><span class="line">        tr.<span class="title function_">setMsg</span>(msg);</span><br><span class="line">        tr.<span class="title function_">setData</span>(data);</span><br><span class="line">        <span class="keyword">return</span> tr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="业务异常封装"><a href="#业务异常封装" class="headerlink" title="业务异常封装"></a>业务异常封装</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.practice.exception;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 业务异常</span></span><br><span class="line"><span class="comment"> * 大型系统出现以下异常：异常处理文档，固化</span></span><br><span class="line"><span class="comment"> * 1、订单  1xxxx</span></span><br><span class="line"><span class="comment"> *      10001 订单已关闭</span></span><br><span class="line"><span class="comment"> *      10002 订单不存在</span></span><br><span class="line"><span class="comment"> *      10003 订单超时</span></span><br><span class="line"><span class="comment"> *      .....</span></span><br><span class="line"><span class="comment"> * 2、商品  2xxxx</span></span><br><span class="line"><span class="comment"> *       20001 商品已下架</span></span><br><span class="line"><span class="comment"> *       20002 商品已售完</span></span><br><span class="line"><span class="comment"> *       20003 商品库存不足</span></span><br><span class="line"><span class="comment"> *       ......</span></span><br><span class="line"><span class="comment"> * 3、用户</span></span><br><span class="line"><span class="comment"> *      30001 用户已注册</span></span><br><span class="line"><span class="comment"> *      30002 用户已登录</span></span><br><span class="line"><span class="comment"> *      30003 用户已注销</span></span><br><span class="line"><span class="comment"> *      30004 用户已过期</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 4、支付</span></span><br><span class="line"><span class="comment"> *      40001 支付失败</span></span><br><span class="line"><span class="comment"> *      40002 余额不足</span></span><br><span class="line"><span class="comment"> *      40003 支付渠道异常</span></span><br><span class="line"><span class="comment"> *      40004 支付超时</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 5、物流</span></span><br><span class="line"><span class="comment"> *      50001 物流状态错误</span></span><br><span class="line"><span class="comment"> *      50002 新疆得加钱</span></span><br><span class="line"><span class="comment"> *      50003 物流异常</span></span><br><span class="line"><span class="comment"> *      50004 物流超时</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 异常处理的最终方式：</span></span><br><span class="line"><span class="comment"> * 1、必须有业务异常类：BizException</span></span><br><span class="line"><span class="comment"> * 2、必须有异常枚举类：BizExceptionEnume  列举项目中每个模块将会出现的所有异常情况</span></span><br><span class="line"><span class="comment"> * 3、编写业务代码的时候，只需要编写正确逻辑，如果出现预期的问题，需要以抛异常的方式中断逻辑并通知上层。</span></span><br><span class="line"><span class="comment"> * 4、全局异常处理器：GlobalExceptionHandler；  处理所有异常，返回给前端约定的json数据与错误码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BizException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer code; <span class="comment">//业务异常码</span></span><br><span class="line">    <span class="keyword">private</span> String msg; <span class="comment">//业务异常信息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BizException</span><span class="params">(Integer code, String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BizException</span><span class="params">(BizExceptionEnume exceptionEnume)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(exceptionEnume.getMsg());</span><br><span class="line">        <span class="built_in">this</span>.code = exceptionEnume.getCode();</span><br><span class="line">        <span class="built_in">this</span>.msg = exceptionEnume.getMsg();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="异常枚举"><a href="#异常枚举" class="headerlink" title="异常枚举"></a>异常枚举</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.practice.exception;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">BizExceptionEnume</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ORDER_xxx：订单模块相关异常</span></span><br><span class="line">    <span class="comment">// PRODUCT_xxx：商品模块相关异常</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 动态扩充.....</span></span><br><span class="line"></span><br><span class="line">    ORDER_CLOSED(<span class="number">10001</span>, <span class="string">&quot;订单已关闭&quot;</span>),</span><br><span class="line">    ORDER_NOT_EXIST(<span class="number">10002</span>, <span class="string">&quot;订单不存在&quot;</span>),</span><br><span class="line">    ORDER_TIMEOUT(<span class="number">10003</span>, <span class="string">&quot;订单超时&quot;</span>),</span><br><span class="line">    PRODUCT_STOCK_NOT_ENOUGH(<span class="number">20003</span>, <span class="string">&quot;库存不足&quot;</span>),</span><br><span class="line">    PRODUCT_HAS_SOLD(<span class="number">20002</span>, <span class="string">&quot;商品已售完&quot;</span>),</span><br><span class="line">    PRODUCT_HAS_CLOSED(<span class="number">20001</span>, <span class="string">&quot;商品已下架&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">BizExceptionEnume</span><span class="params">(Integer code, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ExceptionHandler-本类异常处理"><a href="#ExceptionHandler-本类异常处理" class="headerlink" title="@ExceptionHandler - 本类异常处理"></a>@ExceptionHandler - 本类异常处理</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.practice.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.practice.common.R;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试声明式异常处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//编程式的异常处理；</span></span><br><span class="line">    <span class="comment">//如果大量业务都需要加异常处理代码的话，会很麻烦</span></span><br><span class="line"><span class="comment">//        try &#123;</span></span><br><span class="line"><span class="comment">//            //执行业务</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        &#125;catch (Exception e)&#123;</span></span><br><span class="line"><span class="comment">//            return R.error(100,&quot;执行异常&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">hello</span><span class="params">(<span class="meta">@RequestParam(value = &quot;i&quot;,defaultValue = &quot;0&quot;)</span> Integer i)</span> <span class="keyword">throws</span> FileNotFoundException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">10</span> / i;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        FileInputStream inputStream = new FileInputStream(&quot;D:\\123.txt&quot;);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        s.length();</span><br><span class="line">        <span class="keyword">return</span> R.ok(j);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1、如果Controller本类出现异常，会自动在本类中找有没有<span class="doctag">@ExceptionHandler</span>标注的方法，</span></span><br><span class="line"><span class="comment">     *    如果有，执行这个方法，它的返回值，就是客户端收到的结果</span></span><br><span class="line"><span class="comment">     *  如果发生异常，多个都能处理，就精确优先</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">handleArithmeticException</span><span class="params">(ArithmeticException ex)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;【本类】 - ArithmeticException 异常处理&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">100</span>,<span class="string">&quot;执行异常：&quot;</span> + ex.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(FileNotFoundException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">handleException</span><span class="params">(FileNotFoundException ex)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;【本类】 - FileNotFoundException 异常处理&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">300</span>,<span class="string">&quot;文件未找到异常：&quot;</span> + ex.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(Throwable.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">handleException02</span><span class="params">(Throwable ex)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;【本类】 - Throwable 异常处理&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">500</span>,<span class="string">&quot;其他异常：&quot;</span> + ex.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ControllerAdvice-全局异常处理"><a href="#ControllerAdvice-全局异常处理" class="headerlink" title="@ControllerAdvice - 全局异常处理"></a>@ControllerAdvice - 全局异常处理</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.practice.advice;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.practice.common.R;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.practice.exception.BizException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.BindingResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.FieldError;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.MethodArgumentNotValidException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestControllerAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局异常处理器</span></span><br><span class="line"><span class="comment">//@ResponseBody</span></span><br><span class="line"><span class="comment">//@ControllerAdvice //告诉SpringMVC，这个组件是专门负责进行全局异常处理的</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 如果出现了异常：本类和全局都不能处理，</span></span><br><span class="line"><span class="comment">     * SpringBoot底层对SpringMVC有兜底处理机制；自适应处理（浏览器响应页面、移动端会响应json）</span></span><br><span class="line"><span class="comment">     * 最佳实践：我们编写全局异常处理器，处理所有异常</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * 前端关心异常状态，后端正确业务流程。</span></span><br><span class="line"><span class="comment">     * 推荐：后端只编写正确的业务逻辑，如果出现业务问题，后端通过抛异常的方式提前中断业务逻辑。前端感知异常；</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * 异常处理：</span></span><br><span class="line"><span class="comment">     * 1、</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> e</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">error</span><span class="params">(ArithmeticException e)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;【全局】 - ArithmeticException 处理&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">500</span>, e.getMessage()); <span class="comment">//加@ResponseBody 配合 返回 对象，响应错误json</span></span><br><span class="line"><span class="comment">//        return &quot;error&quot;; //不加@ResponseBody 配合 返回String: 跳到错误页面</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(BizException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">handleBizException</span><span class="params">(BizException e)</span> &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">code</span> <span class="operator">=</span> e.getCode();</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> e.getMsg();</span><br><span class="line">        <span class="keyword">return</span> R.error(code, msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = MethodArgumentNotValidException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">methodArgumentNotValidException</span><span class="params">(MethodArgumentNotValidException ex)</span> &#123;</span><br><span class="line">        <span class="comment">//1、result 中封装了所有错误信息</span></span><br><span class="line">        <span class="type">BindingResult</span> <span class="variable">result</span> <span class="operator">=</span> ex.getBindingResult();</span><br><span class="line"></span><br><span class="line">        List&lt;FieldError&gt; errors = result.getFieldErrors();</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (FieldError error : errors) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">field</span> <span class="operator">=</span> error.getField();</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> error.getDefaultMessage();</span><br><span class="line">            map.put(field, message);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">500</span>, <span class="string">&quot;参数错误&quot;</span>, map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 最终的兜底</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Throwable.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">error</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;【全局】 - Exception处理&quot;</span> + e.getClass());</span><br><span class="line"><span class="comment">//        e.printStackTrace();</span></span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">500</span>, e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="SpringBoot底层默认异常处理机制"><a href="#SpringBoot底层默认异常处理机制" class="headerlink" title="SpringBoot底层默认异常处理机制"></a>SpringBoot底层默认异常处理机制</h3><p><strong>SpringBoot 依然 使用 SpringMVC 的异常处理机制；不过 SpringBoot 编写了一些默认的处理配置；</strong></p>
<p><strong>默认行为：自适应的异常处理；</strong></p>
<ul>
<li><strong>浏览器发的请求，出现异常返回默认错误页面；</strong></li>
</ul>
<p>最佳实践：项目架构是一开始就决定好的（前后分离?）</p>
<h2 id="数据校验"><a href="#数据校验" class="headerlink" title="数据校验"></a>数据校验</h2><p><strong>JSR 303</strong> 是 Java 为 <strong>Bean 数据合法性校验</strong> 提供的<strong>标准框架</strong>，它已经包含在 <strong>JavaEE 6.0 标准中</strong>。JSR 303 通过在 Bean <strong>属性上 标注</strong> 类似于 @NotNull、@Max 等标准的<strong>注解</strong>指定校验规则，并<strong>通过标准的验证接口</strong>对<strong>Bean进行验证</strong>。</p>
<p><strong>数据校验使用流程</strong></p>
<p>1、引入校验依赖：spring-boot-starter-validation</p>
<p>2、定义封装数据的Bean</p>
<p>3、给Bean的字段标注校验注解，并指定校验错误消息提示</p>
<p>4、使用@Valid、@Validated开启校验</p>
<p>5、使用 BindingResult 封装校验结果</p>
<p>6、使用自定义校验注解 + 校验器(implements ConstraintValidator)  完成gender字段自定义校验规则</p>
<p>7、结合校验注解 message属性 与 i18n 文件，实现错误消息国际化</p>
<p>8、结合全局异常处理，统一处理数据校验错误</p>
<h3 id="流程实现"><a href="#流程实现" class="headerlink" title="流程实现"></a>流程实现</h3><h4 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="校验注解"><a href="#校验注解" class="headerlink" title="校验注解"></a>校验注解</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Long</span> id;</span><br><span class="line">    <span class="meta">@NotBlank</span>(message = <span class="string">&quot;姓名不能为空&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Min</span>(value = <span class="number">0</span>, message = <span class="string">&quot;年龄不能小于0岁&quot;</span>)</span><br><span class="line">    <span class="meta">@Max</span>(value = <span class="number">150</span>, message = <span class="string">&quot;年龄不能大于150岁&quot;</span>)</span><br><span class="line">    <span class="meta">@NotNull</span>(message = <span class="string">&quot;年龄不能为空&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Integer</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Email</span>(message = <span class="string">&quot;邮箱格式不正确&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> email;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> gender;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> address;</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">BigDecimal</span> salary;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Date</span> birth;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="开启校验：-Valid"><a href="#开启校验：-Valid" class="headerlink" title="开启校验：@Valid"></a>开启校验：@Valid</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Operation(summary=&quot;新增员工&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/employee&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Valid</span> Employee employee)</span>&#123;</span><br><span class="line"></span><br><span class="line">    employeeService.saveEmp(employee);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="BindingResult：获取校验结果"><a href="#BindingResult：获取校验结果" class="headerlink" title="BindingResult：获取校验结果"></a>BindingResult：获取校验结果</h4><p>BindingResult 要紧跟在 @Valid 标注的校验Bean上。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Operation(summary=&quot;新增员工&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/employee&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Valid</span> Employee employee,BindingResult result)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!result.hasErrors()) &#123;  <span class="comment">//校验通过</span></span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 说明校验错误； 拿到所有属性错误的信息</span></span><br><span class="line">    Map&lt;String, String&gt; errorsMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (FieldError fieldError : result.getFieldErrors()) &#123;</span><br><span class="line">        <span class="comment">//1、获取到属性名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">field</span> <span class="operator">=</span> fieldError.getField();</span><br><span class="line">        <span class="comment">//2、获取到错误信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> fieldError.getDefaultMessage();</span><br><span class="line">        errorsMap.put(field, message);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> R.error(<span class="number">500</span>, <span class="string">&quot;校验失败&quot;</span>, errorsMap);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="自定义校验注解-自定义校验器"><a href="#自定义校验注解-自定义校验器" class="headerlink" title="自定义校验注解+自定义校验器"></a>自定义校验注解+自定义校验器</h4><p>自定义校验注解</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">自定义校验器<span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Constraint(validatedBy = &#123;GenderValidator.class&#125;)</span>  <span class="comment">//校验器去真正完成校验功能。</span></span><br><span class="line"><span class="meta">@Target(&#123; FIELD &#125;)</span></span><br><span class="line"><span class="meta">@Retention(RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Gender &#123;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;性别不能为null&quot;</span>;</span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123; &#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>自定义校验器</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenderValidator</span> <span class="keyword">implements</span> <span class="title class_">ConstraintValidator</span>&lt;<span class="title class_">Gender</span>, <span class="title class_">String</span>&gt; &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 前端提交来的准备让我们进行校验的属性值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context 校验上下文</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">boolean</span> <span class="title function_">isValid</span>(<span class="params"><span class="title class_">String</span> value, <span class="title class_">ConstraintValidatorContext</span> context</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;男&quot;</span>.<span class="title function_">equals</span>(value) || <span class="string">&quot;女&quot;</span>.<span class="title function_">equals</span>(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="错误消息国际化"><a href="#错误消息国际化" class="headerlink" title="错误消息国际化"></a>错误消息国际化</h4><p>多种语言环境下的错误消息配置文件。</p>
<p>浏览器发送请求，改变语言环境，会自动展示对应的错误内容</p>
<h4 id="全局校验错误，统一处理"><a href="#全局校验错误，统一处理" class="headerlink" title="全局校验错误，统一处理"></a>全局校验错误，统一处理</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.practice.advice;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.practice.common.R;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.practice.exception.BizException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.BindingResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.FieldError;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.MethodArgumentNotValidException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestControllerAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局异常处理器</span></span><br><span class="line"><span class="comment">//@ResponseBody</span></span><br><span class="line"><span class="comment">//@ControllerAdvice //告诉SpringMVC，这个组件是专门负责进行全局异常处理的</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//数据校验错误处理器</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = MethodArgumentNotValidException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">methodArgumentNotValidException</span><span class="params">(MethodArgumentNotValidException ex)</span> &#123;</span><br><span class="line">        <span class="comment">//1、result 中封装了所有错误信息</span></span><br><span class="line">        <span class="type">BindingResult</span> <span class="variable">result</span> <span class="operator">=</span> ex.getBindingResult();</span><br><span class="line"></span><br><span class="line">        List&lt;FieldError&gt; errors = result.getFieldErrors();</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (FieldError error : errors) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">field</span> <span class="operator">=</span> error.getField();</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> error.getDefaultMessage();</span><br><span class="line">            map.put(field, message);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">500</span>, <span class="string">&quot;参数错误&quot;</span>, map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 最终的兜底</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Throwable.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">error</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;【全局】 - Exception处理&quot;</span> + e.getClass());</span><br><span class="line"><span class="comment">//        e.printStackTrace();</span></span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">500</span>, e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="VO分层"><a href="#VO分层" class="headerlink" title="VO分层"></a>VO分层</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"><span class="bullet"> *</span> 设计模式：单一职责；</span><br><span class="line"><span class="bullet"> *</span> JavaBean也要分层，各种xxO：</span><br><span class="line"><span class="bullet"> *</span> Pojo：普通java类</span><br><span class="line"><span class="bullet"> *</span> Dao：Database Access Object ： 专门用来访问数据库的对象</span><br><span class="line"><span class="bullet"> *</span> DTO：Data Transfer Object： 专门用来传输数据的对象；</span><br><span class="line"><span class="bullet"> *</span> TO：transfer Object： 专门用来传输数据的对象；</span><br><span class="line"><span class="bullet"> *</span> BO：Business Object： 业务对象（Service），专门用来封装业务逻辑的对象；</span><br><span class="line"><span class="bullet"> *</span> VO：View/Value Object： 值对象，视图对象（专门用来封装前端数据的对象）</span><br><span class="line"><span class="bullet"> *</span></span><br><span class="line"> *</span><br><span class="line"><span class="bullet"> *</span> 新增员工；</span><br><span class="line"><span class="bullet"> *</span> 要求：前端发送请求把员工的json放在请求体中</span><br><span class="line"><span class="bullet"> *</span> 要求：如果校验出错，返回给前端。</span><br><span class="line"><span class="bullet"> *</span>   &#123;</span><br><span class="line"><span class="bullet"> *</span>       &quot;code&quot;: 500,</span><br><span class="line"><span class="bullet"> *</span>       &quot;msg&quot;: &quot;校验失败&quot;,</span><br><span class="line"><span class="bullet"> *</span>       &quot;data&quot;: &#123;</span><br><span class="line"><span class="bullet"> *</span>           &quot;name&quot;: &quot;姓名不能为空&quot;,  //这些就是为了让前端知道是哪些输入框错了，怎么错误，给用户要显示提示。</span><br><span class="line"><span class="bullet"> *</span>           &quot;age&quot;: &quot;年龄不能超过150&quot;</span><br><span class="line"><span class="bullet"> *</span>       &#125;</span><br><span class="line"><span class="bullet"> *</span>   &#125;</span><br><span class="line"><span class="bullet"> *</span> @param vo</span><br><span class="line"><span class="bullet"> *</span> @return</span><br><span class="line"> <span class="emphasis">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="接口文档"><a href="#接口文档" class="headerlink" title="接口文档"></a>接口文档</h2><p><strong>后端会产生很多接口</strong>（所有Controller暴露的请求，我们称为HTTP API，也叫<strong>HTTP接口</strong>）；前后分离开发模式下，前端需要参考这些接口的定义，才能知道给哪里发送请求，接收什么数据，能实现什么功能；<strong>后端开发人员需要编写对应的接口文档</strong>，可以使用以下技术：</p>
<ol>
<li>Swagger 可以快速生成实时接口文档，方便前后开发人员进行协调沟通。遵循 OpenAPI 规范。</li>
<li>Knife4j 是基于 Swagger之上的增强套件</li>
</ol>
<h3 id="版本适配"><a href="#版本适配" class="headerlink" title="版本适配"></a>版本适配</h3><p>Knife4j 和 Swagger的版本适配经常会出现问题。一定使用对应版本的。推荐如下</p>
<h4 id="boot版本"><a href="#boot版本" class="headerlink" title="boot版本"></a>boot版本</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    降版本！    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="knife4j版本"><a href="#knife4j版本" class="headerlink" title="knife4j版本"></a>knife4j版本</h4><p>knife4j 底层有 springdoc，springdoc和springboot的版本适配很重要，负责无法工作</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--找合适的 knife4j 版本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.xiaoymin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>knife4j-openapi3-jakarta-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 如果有 springdoc-openapi 相关依赖，务必用2.x+ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springdoc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springdoc-openapi-starter-webmvc-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="springdoc版本"><a href="#springdoc版本" class="headerlink" title="springdoc版本"></a>springdoc版本</h4><blockquote>
<p>主要的是springdoc和springboot的适配；</p>
<p>knife4j 底层是依赖 springdoc 的</p>
</blockquote>
<table>
<thead>
<tr>
<th>Spring Boot Versions</th>
<th>Springdoc OpenAPI Versions</th>
</tr>
</thead>
<tbody><tr>
<td>3.4.x</td>
<td>2.7.x - 2.8.x</td>
</tr>
<tr>
<td>3.3.x</td>
<td>2.6.x</td>
</tr>
<tr>
<td>3.2.x</td>
<td>2.3.x - 2.5.x</td>
</tr>
<tr>
<td>3.1.x</td>
<td>2.2.x</td>
</tr>
<tr>
<td>3.0.x</td>
<td>2.0.x - 2.1.x</td>
</tr>
<tr>
<td>2.7.x, 1.5.x</td>
<td>1.6.0+</td>
</tr>
<tr>
<td>2.6.x, 1.5.x</td>
<td>1.6.0+</td>
</tr>
<tr>
<td>2.5.x, 1.5.x</td>
<td>1.5.9+</td>
</tr>
<tr>
<td>2.4.x, 1.5.x</td>
<td>1.5.0+</td>
</tr>
<tr>
<td>2.3.x, 1.5.x</td>
<td>1.4.0+</td>
</tr>
<tr>
<td>2.2.x, 1.5.x</td>
<td>1.2.1+</td>
</tr>
<tr>
<td>2.0.x, 1.5.x</td>
<td>1.0.0+</td>
</tr>
</tbody></table>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p><code>springdoc.swagger-ui.path</code> 配置swagger的页面地址</p>
<p><code>springdoc.api-docs.path</code>配置openapi文档地址</p>
<p><code>springdoc.group-configs</code>配置分组</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">springdoc:</span></span><br><span class="line">  <span class="attr">swagger-ui:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/swagger-ui.html</span></span><br><span class="line">    <span class="attr">tags-sorter:</span> <span class="string">alpha</span></span><br><span class="line">  <span class="attr">api-docs:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/v3/api-docs</span></span><br><span class="line">  <span class="attr">group-configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">group:</span> <span class="string">&#x27;default&#x27;</span></span><br><span class="line">      <span class="attr">display-name:</span> <span class="string">&#x27;测试&#x27;</span></span><br><span class="line">      <span class="attr">paths-to-match:</span> <span class="string">&#x27;/**&#x27;</span></span><br><span class="line">      <span class="attr">packages-to-scan:</span> <span class="string">com.lfy.fyadmin.controller</span></span><br><span class="line">  <span class="attr">default-flat-param-object:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="访问测试-1"><a href="#访问测试-1" class="headerlink" title="访问测试"></a>访问测试</h3><p>访问：localhost:8080&#x2F;doc.html ，可以看到knife4j的文档展示</p>
<p>访问：localhost:8080&#x2F;swagger-ui.html，可以看到swagger的文档展示</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">lele</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2025/09/30/springmvc/">http://example.com/2025/09/30/springmvc/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Hexo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/10/04/MyBatis/" title="MyBatis"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">MyBatis</div></div></a></div><div class="next-post pull-right"><a href="/2025/09/21/spring/" title="spring"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">spring</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%A5%E9%97%A8"><span class="toc-text">入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F"><span class="toc-text">开发模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E5%8A%9F%E8%83%BD"><span class="toc-text">SpringMVC功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HelloWorld"><span class="toc-text">HelloWorld</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99HelloController"><span class="toc-text">编写HelloController</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95"><span class="toc-text">访问测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%86%E8%8A%82"><span class="toc-text">细节</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Controller-%E4%B8%8E-RestController"><span class="toc-text">@Controller 与 @RestController </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-text">通配符</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86"><span class="toc-text">请求处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84-RequestMapping"><span class="toc-text">路径映射 - @RequestMapping</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E6%A6%82%E5%BF%B5%E5%A4%8D%E4%B9%A0"><span class="toc-text">前置概念复习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E8%AF%B7%E6%B1%82-%E5%93%8D%E5%BA%94"><span class="toc-text">HTTP请求&#x2F;响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL"><span class="toc-text">URL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON"><span class="toc-text">JSON</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%EF%BC%9A%E5%AE%9E%E9%AA%8C"><span class="toc-text">请求处理：实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-text">环境准备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#index-html-%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B"><span class="toc-text">index.html 文件内容如下</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C1%EF%BC%9A%E4%BD%BF%E7%94%A8%E6%99%AE%E9%80%9A%E5%8F%98%E9%87%8F%EF%BC%8C%E6%94%B6%E9%9B%86%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-text">实验1：使用普通变量，收集请求参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C2%EF%BC%9A%E4%BD%BF%E7%94%A8-RequestParam%EF%BC%8C%E9%80%90%E4%B8%80%E5%B0%81%E8%A3%85%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="toc-text">实验2：使用@RequestParam，逐一封装多个参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C3%EF%BC%9A%E4%BD%BF%E7%94%A8POJO%EF%BC%8C%E7%BB%9F%E4%B8%80%E5%B0%81%E8%A3%85%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="toc-text">实验3：使用POJO，统一封装多个参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C4%EF%BC%9A%E4%BD%BF%E7%94%A8-RequestHeader%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4%E6%95%B0%E6%8D%AE"><span class="toc-text">实验4：使用@RequestHeader获取请求头数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C5%EF%BC%9A%E4%BD%BF%E7%94%A8-CookieValue%E8%8E%B7%E5%8F%96Cookie%E6%95%B0%E6%8D%AE"><span class="toc-text">实验5：使用@CookieValue获取Cookie数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C6%EF%BC%9A%E4%BD%BF%E7%94%A8POJO%EF%BC%8C%E7%BA%A7%E8%81%94%E5%B0%81%E8%A3%85%E5%A4%8D%E6%9D%82%E5%AF%B9%E8%B1%A1"><span class="toc-text">实验6：使用POJO，级联封装复杂对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C7%EF%BC%9A%E4%BD%BF%E7%94%A8-RequestBody%EF%BC%8C%E5%B0%81%E8%A3%85JSON%E5%AF%B9%E8%B1%A1"><span class="toc-text">实验7：使用@RequestBody，封装JSON对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C8%EF%BC%9A%E4%BD%BF%E7%94%A8-RequestPart-RequestParam%EF%BC%8C%E5%B0%81%E8%A3%85%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">实验8：使用@RequestPart&#x2F;@RequestParam，封装文件，测试文件上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C9%EF%BC%9A%E4%BD%BF%E7%94%A8HttpEntity%EF%BC%8C%E5%B0%81%E8%A3%85%E8%AF%B7%E6%B1%82%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE"><span class="toc-text">实验9：使用HttpEntity，封装请求原始数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C10%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FServlet-API%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%8E%9F%E7%94%9F%E8%AF%B7%E6%B1%82%E5%AF%B9%E8%B1%A1"><span class="toc-text">实验10：使用原生Servlet API，获取原生请求对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-text">小结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E6%99%AE%E9%80%9A%E5%8F%82%E6%95%B0"><span class="toc-text">接收普通参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6JSON%E6%95%B0%E6%8D%AE"><span class="toc-text">接收JSON数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">接收文件上传</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%A4%84%E7%90%86"><span class="toc-text">响应处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C1%EF%BC%9A%E8%BF%94%E5%9B%9EJSON%E6%95%B0%E6%8D%AE"><span class="toc-text">实验1：返回JSON数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C2%EF%BC%9A%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-text">实验2：文件下载</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RESTful-CRUD%EF%BC%9A%E6%A1%88%E4%BE%8B"><span class="toc-text">RESTful - CRUD：案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#RESTful"><span class="toc-text">RESTful</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1"><span class="toc-text">设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E5%8F%98%E9%87%8F-PathVariable"><span class="toc-text">路径变量 - @PathVariable</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CRUD-%E6%A1%88%E4%BE%8B"><span class="toc-text">CRUD 案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1"><span class="toc-text">系统设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9ER"><span class="toc-text">统一返回R</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Employee-%E6%A8%A1%E5%9E%8B"><span class="toc-text">Employee - 模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Service-%E4%B8%9A%E5%8A%A1%E5%B1%82"><span class="toc-text">Service - 业务层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#service%E6%8E%A5%E5%8F%A3"><span class="toc-text">service接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Service-%E4%B8%9A%E5%8A%A1%E5%B1%82-1"><span class="toc-text">Service - 业务层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#service%E6%8E%A5%E5%8F%A3-1"><span class="toc-text">service接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#service%E5%AE%9E%E7%8E%B0"><span class="toc-text">service实现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dao-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E5%B1%82"><span class="toc-text">Dao - 数据访问层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Dao%E6%8E%A5%E5%8F%A3"><span class="toc-text">Dao接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Dao%E5%AE%9E%E7%8E%B0"><span class="toc-text">Dao实现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Controller-%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-text">Controller - 控制器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">最佳实践</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%9AHandlerInterceptor"><span class="toc-text">拦截器：HandlerInterceptor</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-2"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">拦截器配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-text">拦截器执行顺序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E9%80%BB%E8%BE%91"><span class="toc-text">通用逻辑</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%EF%BC%9AR%E5%AF%B9%E8%B1%A1"><span class="toc-text">统一返回：R对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E5%BC%82%E5%B8%B8%E5%B0%81%E8%A3%85"><span class="toc-text">业务异常封装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E6%9E%9A%E4%B8%BE"><span class="toc-text">异常枚举</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ExceptionHandler-%E6%9C%AC%E7%B1%BB%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">@ExceptionHandler - 本类异常处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ControllerAdvice-%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">@ControllerAdvice - 全局异常处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBoot%E5%BA%95%E5%B1%82%E9%BB%98%E8%AE%A4%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-text">SpringBoot底层默认异常处理机制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="toc-text">数据校验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E5%AE%9E%E7%8E%B0"><span class="toc-text">流程实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3"><span class="toc-text">校验注解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%90%AF%E6%A0%A1%E9%AA%8C%EF%BC%9A-Valid"><span class="toc-text">开启校验：@Valid</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BindingResult%EF%BC%9A%E8%8E%B7%E5%8F%96%E6%A0%A1%E9%AA%8C%E7%BB%93%E6%9E%9C"><span class="toc-text">BindingResult：获取校验结果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C%E5%99%A8"><span class="toc-text">自定义校验注解+自定义校验器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E6%B6%88%E6%81%AF%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-text">错误消息国际化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%A0%A1%E9%AA%8C%E9%94%99%E8%AF%AF%EF%BC%8C%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86"><span class="toc-text">全局校验错误，统一处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VO%E5%88%86%E5%B1%82"><span class="toc-text">VO分层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3"><span class="toc-text">接口文档</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E9%80%82%E9%85%8D"><span class="toc-text">版本适配</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#boot%E7%89%88%E6%9C%AC"><span class="toc-text">boot版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#knife4j%E7%89%88%E6%9C%AC"><span class="toc-text">knife4j版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#springdoc%E7%89%88%E6%9C%AC"><span class="toc-text">springdoc版本</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95-1"><span class="toc-text">访问测试</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By lele</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>